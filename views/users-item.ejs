<!DOCTYPE html>
<html lang="pt">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

	<!-- Optional theme -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css">

	<!-- Latest compiled and minified JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<title></title>
</head>

<body>
	<div class="container">
		<div class="header clearfix">
			<nav>
				<ul class="nav nav-pills pull-right">
					<li role="presentation"><a href="/">Home</a></li>
					<% if (isAuthenticated) { %>
					<li role="presentation"><a href="/profile">Profile</a></li>
					<% if (user.type === 'admin') {%>
					<li role="presentation"><a href="/users">Users</a></li>
					<% } %>
					<% } %>
					<li role="presentation">
						<% if (isAuthenticated) { %>
						<a href="/logout">Logout</a>
						<% } else { %>
						<a href="/login">Login</a>
						<% } %>
					</li>
				</ul>
			</nav>
			<h3 class="text-muted">Project name</h3>
		</div>

		<script type="text/javascript">
			function removeRecord() {
				if (confirm('Do you really want to remove the record?')) {
					window.open("<%= '/users/' + user.username + '/delete'%>")
				}
			}
		</script>

		<h2><%= (isNew) ? 'New User' : 'User Data' %></h2>

		<% if (errors.length) { %>
		<div class="alert alert-danger">
			<ul>
				<% for (var e of errors) { %>
				<li><%= e.msg %></li>
				<% }%>
			</ul>
		</div>
		<% } %>

		<form action="/users/<%= (isNew) ? 'create' : user.username %>" method="post">
			<div class="form-group">
					<label for="username">Username:</label>
                    <input type="text" id="username" class="form-control" placeholder="Enter your username" name="username" value="<%= user.username %>"
                      required autofocus>
                  </div>
             <div class="form-group">
					<label for="name">Name:</label>
                    <input type="text" id="name" class="form-control" placeholder="Enter your name" name="name"
                      required autofocus>
             </div>
             <div class="form-group">
					<label for="password">Password:</label>
                    <input type="password" id="password" class="form-control" placeholder="Enter your password"
                      name="password" required>
              </div>
                  <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="email" id="email" class="form-control" placeholder="Enter your email"
                      name="email" required>
                  </div>
                  <div class="form-group">
					<label for="NIF">NIF:</label>
                    <input type="text" id="NIF" class="form-control" placeholder="Enter your NIF"
                      name="NIF" required>
                  </div>
                  <div class="form-group">
					<label for="morada">Address:</label>
                    <input type="text" id="morada" class="form-control" placeholder="Enter your address"
                      name="morada" required>
                  </div>				  
                  <div class="form-group">
					<label for="cod_postal">Zip code:</label>
                    <input type="text" id="cod_postal" class="form-control" placeholder="Enter your zip code"
                      name="cod_postal" required>
                  </div>
			<button type="submit" class="btn btn-default">Save</button>
			<% if (! isNew) { %>
			<button type="button" class="btn btn-danger" onclick="removeRecord()">Delete</button>
			<% } %>
				  
		</form>
	</div>
</body>

</html>